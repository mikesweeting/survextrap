<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Survival analysis using a flexible Bayesian model for individual-level right-censored data, optionally combined with aggregate data on counts of survivors in different periods of time. An M-spline is used to describe the hazard function, with a hierarchical prior on the coefficients to control overfitting. Proportional hazards or flexible non-proportional hazards models can be used to relate survival to predictors. Mixture cure models, additive hazards (relative survival) models and waning treatment effects models are also supported. Priors can be customised and calibrated to substantive beliefs. Posterior distributions are estimated using Stan, and outputs are arranged in a tidy format. See See Jackson (2023) &lt;doi:10.48550/arXiv.2306.03957&gt;.">
<title>Survival Extrapolation with a Flexible Parametric Model and External Data • survextrap</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Survival Extrapolation with a Flexible Parametric Model and External Data">
<meta property="og:description" content="Survival analysis using a flexible Bayesian model for individual-level right-censored data, optionally combined with aggregate data on counts of survivors in different periods of time. An M-spline is used to describe the hazard function, with a hierarchical prior on the coefficients to control overfitting. Proportional hazards or flexible non-proportional hazards models can be used to relate survival to predictors. Mixture cure models, additive hazards (relative survival) models and waning treatment effects models are also supported. Priors can be customised and calibrated to substantive beliefs. Posterior distributions are estimated using Stan, and outputs are arranged in a tidy format. See See Jackson (2023) &lt;doi:10.48550/arXiv.2306.03957&gt;.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">survextrap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.8.15</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/cetuximab.html">Case study of using survextrap: cetuximab for head and neck cancer</a>
    <a class="dropdown-item" href="articles/examples.html">Examples of using survextrap</a>
    <a class="dropdown-item" href="articles/methods.html">Details of methods behind survextrap</a>
    <a class="dropdown-item" href="articles/priors.html">Priors in survextrap models</a>
    <a class="dropdown-item" href="articles/sbc.html">Simulation-based calibration of survextrap</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/chjackson/survextrap/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="survextrap">survextrap<a class="anchor" aria-label="anchor" href="#survextrap"></a>
</h1></div>
<p><code>survextrap</code> is an R package to model survival from a combination of</p>
<ol style="list-style-type: decimal">
<li>A standard individual-level, right-censored survival dataset, e.g.</li>
</ol>
<table class="table">
<tr>
<th>
Survival time
</th>
<th>
Death
</th>
<th>
Predictors…
</th>
</tr>
<tr>
<td>
2 years
</td>
<td>
Yes
</td>
<td>
</td>
</tr>
<tr>
<td>
5 years
</td>
<td>
No
</td>
<td>
</td>
</tr>
<tr>
<td>
etc…
</td>
<td>
</td>
</tr>
</table>
<ol start="2" style="list-style-type: decimal">
<li>“External” data sources in the following aggregate “count” form:</li>
</ol>
<table class="table">
<tr>
<th colspan="2">
Follow-up period
</th>
<th colspan="2">
Number
</th>
<th>
Predictors…
</th>
</tr>
<tr>
<th>
Start time <span class="math inline"><em>t</em></span>
</th>
<th>
End time <span class="math inline"><em>u</em></span>
</th>
<th>
Alive at <span class="math inline"><em>t</em></span>
</th>
<th>
Still alive at <span class="math inline"><em>u</em></span>
</th>
<th>
</th>
</tr>
<tr>
<td>
<span class="math inline"><em>t</em><sub>1</sub></span>
</td>
<td>
<span class="math inline"><em>u</em><sub>1</sub></span>
</td>
<td>
<span class="math inline"><em>n</em><sub>1</sub></span>
</td>
<td>
<span class="math inline"><em>r</em><sub>1</sub></span>
</td>
<td>
</td>
</tr>
<tr>
<td>
<span class="math inline"><em>t</em><sub>2</sub></span>
</td>
<td>
<span class="math inline"><em>u</em><sub>2</sub></span>
</td>
<td>
<span class="math inline"><em>n</em><sub>2</sub></span>
</td>
<td>
<span class="math inline"><em>r</em><sub>2</sub></span>
</td>
<td>
</td>
</tr>
<tr>
<td>
etc…
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
</table>
<p>Any number of rows can be supplied for the “external” data, and the time intervals do not have to be distinct or exhaustive.</p>
<p>Many forms of external data that might be useful for survival extrapolation (such as population data, registry data or elicited judgements) can be manipulated into this common “count” form.</p>
<div class="section level3">
<h3 id="principles">Principles<a class="anchor" aria-label="anchor" href="#principles"></a>
</h3>
<ul>
<li><p>Extrapolations from short-term individual level data should be done using <em>explicit data or judgements</em> about how risk will change over time.</p></li>
<li><p>Extrapolations should not rely on standard parametric forms (e.g. Weibull, log-normal, gamma…) that are only used out of convention and do not have interpretations as plausible <em>mechanisms</em> for how risk will change over time.</p></li>
<li><p>Instead of selecting (or averaging) traditional parametric models, an <em>arbitrarily flexible</em> parametric model should be used, that <em>adapts</em> to give the optimal fit to the short-term and long-term data in combination.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="how-it-works">How it works<a class="anchor" aria-label="anchor" href="#how-it-works"></a>
</h3>
<ul>
<li><p>Bayesian multiparameter evidence synthesis is used to jointly model all sources of data and judgements.</p></li>
<li><p>An M-spline is used to represent how the hazard changes through time (as in <a href="https://arxiv.org/abs/2002.09633" class="external-link">rstanarm</a>). The Bayesian fitting method automatically chooses the optimal level of smoothness and flexibility. Spline “knots” should span the period covered by the data, and any future period where there is a chance that the hazard may vary. Then if there is no data in the future period, the uncertainty will be acknowledged and the predicted hazards will have wide credible intervals.</p></li>
<li><p>A proportional hazards model or a flexible non-proportional hazards model can be used to describe the relation of survival to predictors.</p></li>
<li><p>Mixture cure, relative survival and treatment effect waning models are supported.</p></li>
<li><p>It has an R interface, designed to be friendly to those familiar with standard R modelling functions.</p></li>
<li><p><a href="https://mc-stan.org/" class="external-link">Stan</a> is used under the surface to do MCMC (Hamiltonian Monte Carlo) sampling from the posterior distribution, in a similar fashion to <a href="https://mc-stan.org/rstanarm/" class="external-link">rstanarm</a> and <a href="https://CRAN.R-project.org/package=survHE" class="external-link">survHE</a>.</p></li>
<li><p>Estimates and posterior summaries and samples for outputs, such as survival, hazard and (restricted) mean survival, can easily be extracted.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="technical-details-of-the-methods">Technical details of the methods<a class="anchor" aria-label="anchor" href="#technical-details-of-the-methods"></a>
</h3>
<p>The model is fully described in a paper: <a href="https://doi.org/10.1186/s12874-023-02094-1" class="external-link">Jackson, BMC Medical Research Methodology (2023)</a>. See also <code><a href="articles/methods.html">vignette("methods")</a></code>.</p>
<p><code><a href="articles/priors.html">vignette("priors")</a></code> goes into detail on how prior distributions and judgements can be specified in <code>survextrap</code> - an important but often-neglected part of Bayesian analysis.</p>
</div>
<div class="section level3">
<h3 id="examples-of-how-to-use-it">Examples of how to use it<a class="anchor" aria-label="anchor" href="#examples-of-how-to-use-it"></a>
</h3>
<p><code><a href="articles/examples.html">vignette("examples")</a></code> gives a rapid tour of each feature, using simple textbook examples and simulated data.</p>
<p>The <a href="https://chjackson.github.io/survextrap/articles/cetuximab.html">cetuximab case study</a> is a more in-depth demonstration of how <code>survextrap</code> could be used in a typical health technology evaluation, based on clinical trial, disease registry, general population and elicited data. This vignette accompanies Section 4 of the preprint <a href="https://arxiv.org/abs/2306.03957" class="external-link">paper</a>.</p>
</div>
<div class="section level3">
<h3 id="slides-from-presentations-about-survextrap">Slides from presentations about survextrap<a class="anchor" aria-label="anchor" href="#slides-from-presentations-about-survextrap"></a>
</h3>
<ul>
<li><p><a href="https://chjackson.github.io/survextrap/cjackson_survextrap_belfast.pdf">Belfast (RSS NI), December 2023</a></p></li>
<li><p><a href="https://chjackson.github.io/survextrap/cjackson_survextrap_rss23.pdf">Royal Statistical Society, September 2023</a></p></li>
<li><p><a href="https://chjackson.github.io/survextrap/cjackson_survextrap_rhta.pdf">R-HTA, York, June 2023</a></p></li>
<li><p><a href="https://chjackson.github.io/survextrap/cjackson_survextrap_exeter.pdf">Exeter, October 2022</a></p></li>
</ul>
</div>
<div class="section level2">
<h2 id="development">Development<a class="anchor" aria-label="anchor" href="#development"></a>
</h2>
<p>The package is in “beta” status. All major features are included, and there are no substantial changes expected.</p>
<p>Further testing is planned before it is put on CRAN. In particular, work is ongoing to determine “default settings” (for things like priors and model flexibility) that work best in a wide range of examples based on simulation. Though the current defaults are expected to be reasonable for typical use, and there are examples in the vignettes of fine-tuning them for specific cases.</p>
<p>The current version can be installed as:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"survextrap"</span>, repos<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'https://chjackson.r-universe.dev'</span>,</span>
<span>                                       <span class="st">'https://cloud.r-project.org'</span><span class="op">)</span><span class="op">)</span></span></code></pre>
<p>Please give feedback and suggestions if you do. These can be posted on <a href="https://github.com/chjackson/survextrap/issues" class="external-link">github issues</a>, or <a href="mailto:chris.jackson@mrc-bsu.cam.ac.uk">email</a>.</p>
<!-- badges: start -->

</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/chjackson/survextrap/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/chjackson/survextrap/issues" class="external-link">Report a bug</a></li>
<li><a href="https://github.com/chjackson/survextrap/issues" class="external-link">Questions, suggestions</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing survextrap</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Christopher Jackson <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0002-6656-8913" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#maturing" class="external-link"><img src="lifecycle-maturing.svg" alt="lifecycle"></a></li>
<li><a href="https://github.com/chjackson/survextrap/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/chjackson/survextrap/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/chjackson/survextrap" class="external-link"><img src="https://codecov.io/gh/chjackson/survextrap/branch/master/graph/badge.svg" alt="test-coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Christopher Jackson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
